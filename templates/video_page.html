<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Document</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
	<link rel="stylesheet" href="{{ url_for('static', filename='video_page.css') }}" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
	<nav class="navbar">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">
				<img src="{{ url_for('static', filename='YouTube-Icon-White-Logo.wine.svg')}}" alt="Logo" width="80" height="45" class=""/>
				<span class="fw-bold text-white navbarName">Video Summarization & Navigation System</span>
			</a>
			<button type="button" class="btn btn-outline-light border-3 border-white" id="signupbtn">
				SignUp
			</button>
		</div>
	</nav>
	<section id="videoframe">
		<iframe src="{{video_url}}" frameborder="0" allowfullscreen title="videoFrame"></iframe>
	</section>

	<section id="features">

		<!-- Loading spinner -->
		<div class="spinner-container">
			<div id="spinner" class="spinner"></div>
		</div>

		<div class="form_buttons">

			<!-- Translate buttons (initially hidden) -->
			<form action="/translate" method="post">
				<button type="submit" id="translateButton" class="buttons">Transcript</button>
			</form>
			<form action="/summary" method="post">
				<button type="submit" id="summaryButton" class="buttons">Summary</button>
			</form>
			<form action="/subtopic_skip" method="post">
				<button type="submit" id="subtopicSkipButton" class="buttons">Subtopic-skip</button>
			</form>
		</div>

	</section>
</body>

<script>
	// Function to check download status
	function checkDownloadStatus() {
		fetch("/check_download_status")
			.then((response) => response.json())
			.then((data) => {
				if (data.onComplete) {
					// Hide loading spinner
					document.querySelector(".spinner-container").style.display =
						"none";
					// Show translate buttons
					document.getElementById("translateButton").style.display =
						"inline-block";
					document.getElementById("summaryButton").style.display =
						"inline-block";
					document.getElementById("subtopicSkipButton").style.display =
						"inline-block";
				} else {
					// Download still in progress, check again after 1 second
					setTimeout(checkDownloadStatus, 1000);
				}
			})
			.catch((error) => {
				console.error("Error checking download status:", error);
			});
	}

	// Start checking download status when the page loads
	checkDownloadStatus();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
	crossorigin="anonymous"></script>

</html>